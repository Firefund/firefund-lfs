<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Donut</title>
	<link rel="stylesheet" href="/css/bundle.css">
	<link rel="preconnect" href="https://cdnjs.cloudflare.com/" crossorigin>
	<link rel="dns-prefetch" href="https://cdnjs.cloudflare.com/">
	<style>
		.vanilla {
			display: inline-block;
		}
	</style>
</head>
	<body>
		<div class="f-spacer"></div>

		<main class="f-page-wrapper">
			<article class="f-content">
				<div class="f-spacer"></div>

				<canvas class="vanilla" width="180" height="180"></canvas>
				<canvas class="vanilla" width="180" height="180"></canvas>
				<img class="vanilla" width="180" height="180" src="./donut.png">
				<canvas class="vanilla" width="180" height="180"></canvas>
				<canvas class="vanilla" width="180" height="180"></canvas>

				<canvas class="d-goal--canvas"></canvas>

				<div class="f-spacer"></div>
			</article>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js" integrity="sha512-hZf9Qhp3rlDJBvAKvmiG+goaaKRZA6LKUO35oK6EsM0/kjPK32Yw7URqrq3Q+Nvbbt8Usss+IekL7CRn83dYmw==" crossorigin="anonymous"></script>
			<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js" integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw==" crossorigin="anonymous"></script> -->
		<script>
			// @ts-check
			'use strict'

			const canvasList = document.querySelectorAll('canvas.vanilla')
			const red = "hsla(1, 73.7%, 38.8%, 1)"

			var {ctx, gradient} = createGradient1(canvasList[0].getContext('2d'))
			ctx.fillStyle = gradient
			drawRect(ctx)

			var {ctx, gradient} = createGradient1(canvasList[1].getContext('2d'))
			ctx.strokeStyle = gradient
			ctx.lineWidth = 42
			drawArc(ctx)

			var {ctx, gradient} = createGradient2(canvasList[2].getContext('2d'))
			ctx.fillStyle = gradient
			drawRect(ctx)

			var {ctx, gradient} = createGradient2(canvasList[3].getContext('2d'))
			ctx.strokeStyle = gradient
			ctx.lineWidth = 42
			drawArc(ctx)

			function createGradient1 (ctx) {
				// The inner circle is at x=110, y=90, with radius=30
				// The outer circle is at x=100, y=100, with radius=70
				// ctx.createRadialGradient(x0, y0, r0, x1, y1, r1)
				const gradient = ctx.createRadialGradient(100,100,31, 100,100,70);

				// Add three color stops
				const innerColor = "hsla(1, 60%, 30%, 1)"
				const mainColor = red
				const outerColor = "hsla(1, 73.7%, 48%, 1)"
				gradient.addColorStop(0, innerColor);
				gradient.addColorStop(.04, innerColor);
				gradient.addColorStop(.05, mainColor);
				gradient.addColorStop(1, outerColor);

				return { ctx, gradient }
			}
			function createGradient2 (ctx) {
				// The inner circle is at x=110, y=90, with radius=30
				// The outer circle is at x=100, y=100, with radius=70
				// ctx.createRadialGradient(x0, y0, r0, x1, y1, r1)
				const gradient = ctx.createRadialGradient(100,100,31, 100,100,70);

				// Add three color stops
				const innerColor = "hsla(1, 90%, 10%, 1)"
				const mainColor = "hsla(1, 73.7%, 20%, 1)"
				const outerColor = "transparent"
				gradient.addColorStop(0, innerColor);
				gradient.addColorStop(.04, innerColor);
				gradient.addColorStop(.05, mainColor);
				gradient.addColorStop(.7, mainColor);
				gradient.addColorStop(.73, outerColor);

				return { ctx, gradient }
			}

			function drawRect (ctx) {
				// ctx.fillRect(x, y, width, height)
				ctx.fillRect(20, 20, 160, 160);
			}

			function drawArc (ctx) {
				ctx.beginPath();
				// ctx.arc(x, y, radius, startAngle, endAngle [, anticlockwise])
				ctx.arc(100, 100, 50, 0, 2 * Math.PI);
				ctx.stroke()
			}

			chartjs()
			function chartjs () {
				/** @type {CanvasRenderingContext2D} */
				const ctx = document.querySelector('.d-goal--canvas').getContext('2d')
				const { gradient1 } = createGradient1(ctx)
				const { gradient2 } = createGradient2(ctx)

				const donut = new Chart(ctx, {
					type: 'doughnut',
					data: {
						labels: [
							"Pledged",
							"Missing"
						],
						datasets: [{
							label: "Donations",
							data: [420, 80],
							// borderColor: [red, "white"],
							// backgroundColor: [red, "white"],
							borderColor: [gradient1, gradient2],
							backgroundColor: [gradient1, gradient2],
							// backgroundColor: gradient1,
							// borderWidth: 42
						}]
					},
					options: {
						legend: {
							display: false
						}
					}
				});

				// const gradient = ctx.createRadialGradient()
				// console.log(
				// 	donut.innerRadius,
				// 	donut.outerRadius,
				// 	donut.radiusLength,
				// 	donut)
			}

		</script>
		<script>
			document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
			':35729/livereload.js?snipver=1"></' + 'script>')
		</script>
	</body>
